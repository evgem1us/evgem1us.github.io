# Bounds (Границы)

## Описание

`Bounds` отвечает за то, насколько далеко будет видно ваши `Skinned Meshes` от заданного для них центра (на `Basic Meshes` не влияет). 
Если вы когда-либо видели как у модельки пропадают части тела при повороте камеры в сторону - это из-за неправильно настроенных границ.

Для ранга производительности нужно, чтобы у всех `Skinned Meshes` размер границ не выходил за указанные размеры. Это можно сделать двумя способами:
- Через Modular Avatar
- Вручную

## Способы оптимизации

### Установка границ через Modular Avatar

1. Добавьте на корень аватара компонент `MA Mesh Settings`. Компонент также выставит для всех мешей точку, относительно которой рассчитывается освещение.
2. `Anchor Override Mode` и `Bounds Override Mode` выставьте в `Set`.
3. Поставьте в `Anchor Override` кость, от которой будет считаться освещение. Я обычно ставлю `Chest`
   :::note
   Иногда ставят `Hips`, но на некоторых картах из-за этого ваш аватар может почернеть при приседании или погружении бедер под землю или некоторые меши карты.
   :::
4. Поставьте в `Root Bone` кость `Hips`, относительно него будет рассчитываться центр модели. 
5. В `Bounds` для `Center` оставьте координаты `0, 0, 0`, это смещение центра модели относительно `Hips`. 
6. В `Extent` выставляется размер границ. Значения показывают насколько границы раздвигаются по указанной координате **в каждую сторону**, т.е. для `X` при значении `1.5` граница будет сдвинута на 1.5 метра по -X и по X, суммарно 3 метра (это значение попадет в ранг производительности). Я обычно ставлю везде по 1.5 метра, соответствует границам 3х3х3 м (Good-аватар), жалоб на пропадание вещей не замечал  
      ![MA Mesh Settings](/img/guides/nondestructive_optimization/image-47.png)
7. На префабах одежды/волос/прочего, добавляемых с помощью Modular Avatar, на самом префабе обычно также присутствует компонент `MA Mesh Settings`. На этом компоненте для `Anchor Override Mode` и `Bounds Override Mode` должны иметь значение `Set or Inherit if set by parent` или `Inherit` чтобы использовать настройки с корня вашего аватара. На остальные настройки можно не обращать внимания.  
![Inherit Mesh Settings](/img/guides/nondestructive_optimization/image-48.png)

   :::note
   Настройки для этих префабах будут применяться если будет выставлен `Set`, но в этом нет особого смысла т.к. они все равно должны быть одинаковы практически всегда.  
   :::

### Ручная установка границ на мешах {#manual}

Вручную для каждого `Skinned Mesh Renderer` на аватаре. Выставляется аналогично настройкам как с Modular Avatar, только руками и зачем.
1. Настройки называются аналогично

![Bounds и Anchor на Skinned Mesh Renderer](/img/guides/nondestructive_optimization/image-92.png)

2. `Anchor Override Mode` и `Bounds Override Mode` отсутствуют т.к. это настройки только компонента `MA Mesh Settings`.


## Возможные проблемы

- Если вы изменяете вес аватара через масштабирование объекта на сцене (чтобы поменять стандартный рост), то выставленные вами границы будут умножены на соответствующий масштаб
  - Например, если выставить Extent 1.5 x 1.5 x 1.5 м и масштаб аватар 1.2 (см. скриншот ниже), то итоговый размер будет 3.6 х 3.6 х 3.6 метра (3 умножить на 1.2 м). Соответственно, разделите extent на 1.2 в таком случае чтобы вернуть изначальные размеры  
  ![Масштаб аватара](/img/guides/nondestructive_optimization/image-60.png)

- Если масштаб аватара не изменяется, но при выставлении Extent, например, 2 x 2 x 2 аватар по границам становится Medium вместо Good, хотя в ранге производительности написано 4 х 4 х 4 м - особенности округления, поставьте Extent чуть меньше, 1.99 х 1.99 х 1.99 м.